!function(t){"use strict";jQuery(window).on("elementor/frontend/init",(function(){var t,e=elementorModules.frontend.handlers.Base;t=e.extend({getDefaultSettings:function(){return{selectors:{widgetContainer:".elementor-widget-container",postContentContainer:'.elementor:not([data-elementor-type="header"]):not([data-elementor-type="footer"]):not([data-elementor-type="popup"])',expandButton:".lakit-toc__toggle-button--expand",collapseButton:".lakit-toc__toggle-button--collapse",body:".lakit-toc__body",headerTitle:".lakit-toc__header-title"},classes:{anchor:"elementor-menu-anchor",listWrapper:"lakit-toc__list-wrapper",listItem:"lakit-toc__list-item",listTextWrapper:"lakit-toc__list-item-text-wrapper",firstLevelListItem:"lakit-toc__top-level",listItemText:"lakit-toc__list-item-text",activeItem:"elementor-item-active",headingAnchor:"lakit-toc__heading-anchor",collapsed:"lakit-toc--collapsed"},listWrapperTag:"numbers"===this.getElementSettings().marker_view?"ol":"ul"}},getDefaultElements:function(){const t=this.getSettings();return{$pageContainer:this.getContainer(),$widgetContainer:this.$element.find(t.selectors.widgetContainer),$expandButton:this.$element.find(t.selectors.expandButton),$collapseButton:this.$element.find(t.selectors.collapseButton),$tocBody:this.$element.find(t.selectors.body),$listItems:this.$element.find("."+t.classes.listItem)}},getContainer:function(){const t=this.getElementSettings();if(t.container){const e=this.sanitizeContainer(t.container);if(e)return jQuery(e)}const e=this.$element.parents(".elementor");if("popup"===e.attr("data-elementor-type"))return e;const i=this.getSettings();return jQuery(i.selectors.postContentContainer)},bindEvents:function(){this.getSettings();const t=this.getElementSettings();t.minimize_box&&(this.elements.$expandButton.on("click",(()=>this.expandBox())).on("keyup",(t=>this.triggerClickOnEnterSpace(t))),this.elements.$collapseButton.on("click",(()=>this.collapseBox())).on("keyup",(t=>this.triggerClickOnEnterSpace(t)))),t.collapse_subitems&&this.elements.$listItems.on("hover",(t=>jQuery(t.target).slideToggle()))},getHeadings:function(){const t=this.getElementSettings(),e=t.headings_by_tags.join(","),i=this.getSettings("selectors"),s=t.exclude_headings_by_selector;return this.elements.$pageContainer.find(e).not(i.headerTitle).filter(((t,e)=>!jQuery(e).closest(s).length))},addAnchorsBeforeHeadings:function(){const t=this.getSettings("classes");this.elements.$headings.before((e=>{if(!jQuery(this.elements.$headings[e]).data("hasOwnID"))return`<span id="${t.headingAnchor}-${e}" class="${t.anchor} "></span>`}))},activateItem:function(t){const e=this.getSettings("classes");if(this.deactivateActiveItem(t),t.addClass(e.activeItem),this.$activeItem=t,!this.getElementSettings("collapse_subitems"))return;let i;i=t.hasClass(e.firstLevelListItem)?t.parent().next():t.parents("."+e.listWrapper).eq(-2),i.length?(this.$activeList=i,this.$activeList.stop().slideDown()):delete this.$activeList},deactivateActiveItem:function(t){if(!this.$activeItem||this.$activeItem.is(t))return;const{classes:e}=this.getSettings();this.$activeItem.removeClass(e.activeItem),!this.$activeList||t&&this.$activeList[0].contains(t[0])||this.$activeList.slideUp()},followAnchor:function(t,e){const i=t[0].hash;let s;try{s=jQuery(decodeURIComponent(i))}catch(t){return}this.createObserver(i,s,{rootMargin:"0px",threshold:0},t,e).observe(s[0])},createObserver:function(t,e,i,s,n){let a=0;return new IntersectionObserver((t=>{t.forEach((t=>{const i=document.documentElement.scrollTop,o=i>a,l=e.attr("id");t.isIntersecting&&!this.itemClicked?(this.viewportItems[l]=!0,this.activateItem(s)):t.isIntersecting&&o?(delete this.viewportItems[l],Object.keys(this.viewportItems).length&&this.activateItem(this.$listItemTexts.eq(n+1))):o||(delete this.viewportItems[l],this.activateItem(this.$listItemTexts.eq(n-1))),a=i<=0?0:i}))}),i)},followAnchors:function(){this.$listItemTexts.each(((t,e)=>this.followAnchor(jQuery(e),t)))},populateTOC:function(){this.listItemPointer=0;this.getElementSettings().hierarchical_view?this.createNestedList():this.createFlatList(),this.$listItemTexts=this.$element.find(".lakit-toc__list-item-text"),this.$listItemTexts.on("click",this.onListItemClick.bind(this)),elementorFrontend.isEditMode()||this.followAnchors()},createNestedList:function(){this.headingsData.forEach(((t,e)=>{t.level=0;for(let i=e-1;i>=0;i--){const e=this.headingsData[i];if(e.tag<=t.tag){t.level=e.level,e.tag<t.tag&&t.level++;break}}})),this.elements.$tocBody.html(this.getNestedLevel(0))},createFlatList:function(){this.elements.$tocBody.html(this.getNestedLevel())},getNestedLevel:function(t){const e=this.getSettings(),i=this.getElementSettings(),s=this.getElementSettings("icon");let n;s&&(n=elementorFrontend.config.experimentalFeatures.e_font_icon_svg&&!elementorFrontend.isEditMode()?void 0!==s.rendered_tag?s.rendered_tag:"":s.value?`<i class="${this.sanitizeAttributeValue(s.value)}"></i>`:"");let a=`<${e.listWrapperTag} class="${this.sanitizeAttributeValue(e.classes.listWrapper)}">`;for(;this.listItemPointer<this.headingsData.length;){const o=this.headingsData[this.listItemPointer];let l=e.classes.listItemText;if(0===o.level&&(l+=" "+e.classes.firstLevelListItem),t>o.level)break;if(t===o.level){a+=`<li class="${e.classes.listItem}">`,a+=`<div class="${e.classes.listTextWrapper}">`;let r=`<a href="#${this.sanitizeAttributeValue(o.anchorLink)}" class="${this.sanitizeAttributeValue(l)}">${this.sanitizeHTML(o.text)}</a>`;"bullets"===i.marker_view&&s&&(r=`${n}${r}`),a+=r,a+="</div>",this.listItemPointer++;const c=this.headingsData[this.listItemPointer];c&&t<c.level&&(a+=this.getNestedLevel(c.level)),a+="</li>"}}return a+=`</${e.listWrapperTag}>`,a},handleNoHeadingsFound:function(){return this.elements.$tocBody.html("No headings were found on this page.")},collapseBodyListener:function(){const t=elementorFrontend.breakpoints.getActiveBreakpointsList({withDesktop:!0}),e=this.getElementSettings("minimized_on"),i=elementorFrontend.getCurrentDeviceMode(),s=this.$element.hasClass(this.getSettings("classes.collapsed"));"desktop"===e||t.indexOf(e)>=t.indexOf(i)?s||this.collapseBox(!1):s&&this.expandBox(!1)},onElementChange:function(t){"minimized_on"===t&&this.collapseBodyListener()},getHeadingAnchorLink:function(t,e){const i=this.elements.$headings[t].id,s=this.elements.$headings[t].closest(".elementor-widget").id;let n="";return i?n=i:s&&(n=s),i||s?jQuery(this.elements.$headings[t]).data("hasOwnID",!0):n=`${e.headingAnchor}-${t}`,n},setHeadingsData:function(){this.headingsData=[];const t=this.getSettings("classes");this.elements.$headings.each(((e,i)=>{const s=this.getHeadingAnchorLink(e,t);this.headingsData.push({tag:+i.nodeName.slice(1),text:i.textContent,anchorLink:s})}))},run:function(){if(this.elements.$headings=this.getHeadings(),!this.elements.$headings.length)return this.handleNoHeadingsFound();this.setHeadingsData(),elementorFrontend.isEditMode()||this.addAnchorsBeforeHeadings(),this.populateTOC(),this.getElementSettings("minimize_box")&&this.collapseBodyListener()},expandBox:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.getCurrentDeviceSetting("min_height");this.$element.removeClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.slideDown(),this.elements.$expandButton.attr("aria-expanded","true"),this.elements.$collapseButton.attr("aria-expanded","true"),this.elements.$widgetContainer.css("min-height",e.size+e.unit),t&&this.elements.$collapseButton.trigger("focus")},collapseBox:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$element.addClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.slideUp(),this.elements.$expandButton.attr("aria-expanded","false"),this.elements.$collapseButton.attr("aria-expanded","false"),this.elements.$widgetContainer.css("min-height","0px"),t&&this.elements.$expandButton.trigger("focus")},triggerClickOnEnterSpace:function(t){13!==t.keyCode&&32!==t.keyCode||(t.currentTarget.click(),t.stopPropagation())},onInit:function(){e.prototype.onInit.apply(this,arguments),this.viewportItems=[],jQuery((()=>this.run()))},onListItemClick:function(t){this.itemClicked=!0,setTimeout((()=>this.itemClicked=!1),2e3);const e=jQuery(t.target),i=e.parent().next(),s=this.getElementSettings("collapse_subitems");let n;s&&e.hasClass(this.getSettings("classes.firstLevelListItem"))&&i.is(":visible")&&(n=!0),this.activateItem(e),s&&n&&i.slideUp()},sanitizeHTMLAttributes:function(t){return t.replace(/on[a-z]+=("|).*?.*("|)([^>]|\s+)/gi,"")},sanitizeHTML:function(t){return t.replace(/[^\w. ]/gi,(function(t){return"&#"+t.charCodeAt(0)+";"}))},sanitizeAttributeValue:function(t){return t.replace(/[^\w\s-:]/gi,"")},sanitizeContainer:function(t){const e=document.createElement("template");return e.innerHTML=t,e.content.textContent||""}}),elementorFrontend.elementsHandler.attachHandler("lakit-table-of-contents",t)}))}();