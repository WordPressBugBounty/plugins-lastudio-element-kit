!function(e){"use strict";var s={noticeCreate:function(s,a,t){var i,n,r,o=0;if(!a||"true"===(t||!1))return!1;i=e('<div class="lakit-handler-notice '+s+'"><span class="dashicons"></span><div class="inner">'+a+"</div></div>"),e("body").prepend(i),r=100,e(".lakit-handler-notice").each((function(){e(this).css({top:r}),r+=e(this).outerHeight(!0)})),o=-1*(i.outerWidth(!0)+10),i.css({right:o}),n=setTimeout((function(){i.css({right:10}).addClass("show-state")}),100),n=setTimeout((function(){o=-1*(i.outerWidth(!0)+10),i.css({right:o}).removeClass("show-state")}),4e3),n=setTimeout((function(){i.remove(),clearTimeout(n)}),4500)},serializeObject:function(s){var a=this,t={},i={},n={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,s,a){return e[s]=a,e},this.push_counter=function(e){return void 0===i[e]&&(i[e]=0),i[e]++},e.each(s.serializeArray(),(function(){var s,i,r,o;if(n.validate.test(this.name)){for(i=this.name.match(n.key),r=this.value,o=this.name;void 0!==(s=i.pop());)o=o.replace(new RegExp("\\["+s+"\\]$"),""),s.match(n.push)?r=a.build([],a.push_counter(o),r):s.match(n.fixed)?r=a.build([],s,r):s.match(n.named)&&(r=a.build({},s,r));t=e.extend(!0,t,r)}})),t}},a=function(a){var t=this,i={handlerId:"",cache:!1,processData:!0,url:"",async:!1,beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};a&&e.extend(i,a),t.handlerSettings=window.lakitSubscribeConfig||{},t.ajaxRequest=null,t.ajaxProcessing=!1,t.data={action:t.handlerSettings.action,nonce:t.handlerSettings.nonce},""===i.url&&(i.url=t.handlerSettings.ajax_url),t.send=function(){t.ajaxProcessing&&s.noticeCreate("error-notice",t.handlerSettings.sys_messages.wait_processing,t.handlerSettings.is_public),t.ajaxProcessing=!0,t.ajaxRequest=e.ajax({type:t.handlerSettings.type,url:i.url,data:t.data,cache:i.cache,dataType:t.handlerSettings.data_type,processData:i.processData,beforeSend:function(e,s){null===t.ajaxRequest||i.async||t.ajaxRequest.abort(),i.beforeSendCallback&&"function"==typeof i.beforeSendCallback&&i.beforeSendCallback(e,s)},error:function(s,a,t){e(document).trigger({type:"lakit-ajax-handler-error",jqXHR:s,textStatus:a,errorThrown:t}),i.errorCallback&&"function"==typeof i.errorCallback&&i.errorCallback(s,a,t)},success:function(s,a,n){t.ajaxProcessing=!1,e(document).trigger({type:"lakit-ajax-handler-success",response:s,jqXHR:n,textStatus:a}),i.successCallback&&"function"==typeof i.successCallback&&i.successCallback(s,a,n)},complete:function(s,a){e(document).trigger({type:"lakit-ajax-handler-complete",jqXHR:s,textStatus:a}),i.completeCallback&&"function"==typeof i.completeCallback&&i.completeCallback(s,a)}})},t.sendData=function(e){var s=e||{};t.data={action:"lakit_ajax",_nonce:t.handlerSettings.nonce,actions:JSON.stringify({newsletter_subscribe:{action:"newsletter_subscribe",data:s}})},t.send()},t.sendFormData=function(a){var i,n=e(a);i=s.serializeObject(n),t.sendData(i)}};e(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/lakit-subscribe-form.default",(function(s){!function(s){var t=s.find(".lakit-subscribe-form"),i=s.data("id"),n=t.data("settings"),r=e(".lakit-subscribe-form__form",t),o=(e(".lakit-subscribe-form__fields",t),e(".lakit-subscribe-form__mail-field",t)),c=o.data("instance-data"),l=e(".lakit-subscribe-form__submit",t),d=e(".lakit-subscribe-form__message",t),u=window.lakitSubscribeConfig.sys_messages.invalid_mail,b=e('input[name="agreement_checkbox"]',t),f=e(".lakit-subscribe-form__agreements",t),m=window.lakitSubscribeConfig.sys_messages.require_field,h=new a({handlerId:"lakit_elementor_subscribe_form_ajax",errorCallback:function(s,a,i){var n=window.lakitSubscribeConfig.sys_messages.invalid_nonce,r="lakit-subscribe-form--response-error";l.removeClass("loading"),t.addClass(r),e("span",d).html(n),d.css({visibility:"visible"}),setTimeout((function(){d.css({visibility:"hidden"}),t.removeClass(r)}),2e4)},successCallback:function(s){var a,r,o;s.success?s.data.responses.newsletter_subscribe.success?(r=s.data.responses.newsletter_subscribe.data.message,a=s.data.responses.newsletter_subscribe.data.type):(r=s.data.responses.newsletter_subscribe.data,a="error"):(a="error",r=s.responses.error.data),o="lakit-subscribe-form--response-"+a,l.removeClass("loading"),t.removeClass("lakit-subscribe-form--response-error"),t.addClass(o),e("span",d).html(r),d.css({visibility:"visible"}),setTimeout((function(){d.css({visibility:"hidden"}),t.removeClass(o)}),2e4),n.redirect&&(window.location.href=n.redirect_url),e(window).trigger({type:"lastudio-kit/subscribe",elementId:i,successType:a,inputData:c})}});function p(){var s=o.val(),a={email:s,use_target_list_id:n.use_target_list_id||!1,target_list_id:n.target_list_id||"",data:c},i=r.serializeArray(),p={};if(d.css({visibility:"hidden"}),b.length>0&&!b.is(":checked"))return f.addClass("agreement-invalid"),t.addClass("lakit-subscribe-form--response-error"),e("span",d).html(m),d.css({visibility:"visible"}),!1;/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s)?(e.each(i,(function(e,s){"email"===s.name?a[s.name]=s.value:p[s.name]=s.value})),a.additional=p,h.sendData(a),l.addClass("loading")):(o.addClass("mail-invalid"),t.addClass("lakit-subscribe-form--response-error"),e("span",d).html(u),d.css({visibility:"visible"}),setTimeout((function(){t.removeClass("lakit-subscribe-form--response-error"),d.css({visibility:"hidden"}),o.removeClass("mail-invalid")}),2e4))}o.on("focus",(function(){o.removeClass("mail-invalid")})),b.on("change",(function(){e(this).is(":checked")&&f.removeClass("agreement-invalid")})),e(document).keydown((function(e){if(13===e.keyCode&&o.is(":focus"))return p(),!1})),l.on("click",(function(){return p(),!1}))}(s)}))}))}(jQuery);